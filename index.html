<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog Curatorial de ASMR Japonés</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
  <style>
    body { font-family: system-ui, sans-serif; background: #f0f2f5; color: #333; margin: 0; padding: 20px; }
    .container { max-width: 800px; margin: 0 auto; }
    .asmr-post { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .controls { margin-top: 15px; }
    .toggle-subtitle-btn { background: #6c757d; color: #fff; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-size: 14px; }
    .toggle-subtitle-btn.active { background: #7e57c2; }
    .aplayer .aplayer-lrc { position: absolute !important; left: -9999px !important; top: -9999px !important; width: 100px; height: 50px; }
    #lyricsBar { position: fixed; bottom: 5%; left: 50%; transform: translateX(-50%); max-width: 90%; text-align: center; pointer-events: none; visibility: hidden; opacity: 0; transition: opacity 0.3s, visibility 0.3s; z-index: 9999; }
    #lyricsBar.visible { visibility: visible; opacity: 1; }
    #lyric { display: inline-block; font-size: 2.2em; font-weight: bold; color: #fff; background: rgba(0,0,0,0.75); padding: 12px 22px; border-radius: 8px; text-shadow: 2px 2px 5px rgba(0,0,0,0.9); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90vw; }
  </style>
</head>
<body>
  <div class="container">
    <header><h1>Mi Colección de ASMR Japonés</h1></header>
    <main>

      <!-- POST 1 -->
      <section class="asmr-post" id="post_RJ01152643">
        <h2>Con semejante tremendo tamaño…♪♪</h2>
        <p>8 tracks</p>
        <div id="player_RJ01152643"></div>
        <div class="controls">
          <button id="subtitle-toggle-btn-RJ01152643" class="toggle-subtitle-btn">Mostrar Subtítulos</button>
        </div>
        <script>
          (function(){
            const ID = 'RJ01152643';
            const container = document.getElementById('player_' + ID);
            if (!container || container.classList.contains('aplayer-initialized')) return;
            container.classList.add('aplayer-initialized');

            const ap = new APlayer({
              container: container,
              theme: '#7e57c2',
              lrcType: 3,
              <!-- AUDIO_LIST_START:RJ01152643 -->
              audio: [
                /* Este bloque será reemplazado automáticamente */
              ]
              <!-- AUDIO_LIST_END:RJ01152643 -->
            });

            const lyricsBar = document.getElementById('lyricsBar');
            const lyricSpan = document.getElementById('lyric');
            const toggleBtn = document.getElementById('subtitle-toggle-btn-RJ01152643');
            let subtitlesEnabled = false;

            toggleBtn.addEventListener('click', function() {
              subtitlesEnabled = !subtitlesEnabled;
              this.classList.toggle('active', subtitlesEnabled);
              lyricsBar.classList.toggle('visible', subtitlesEnabled);
              this.textContent = subtitlesEnabled ? 'Ocultar Subtítulos' : 'Mostrar Subtítulos';
              if (!subtitlesEnabled) lyricSpan.textContent = '';
              else {
                const currentLine = container.querySelector('.aplayer-lrc-current');
                if (currentLine) lyricSpan.textContent = currentLine.textContent;
              }
            });

            ap.on('canplay', function () {
              const lrcContainer = container.querySelector('.aplayer-lrc');
              if (!lrcContainer) return;
              const observer = new MutationObserver(() => {
                const current = lrcContainer.querySelector('.aplayer-lrc-current');
                const text = current ? current.textContent : '';
                if (subtitlesEnabled && lyricSpan.textContent !== text) {
                  lyricSpan.textContent = text;
                }
              });
              observer.observe(lrcContainer, { childList: true, subtree: true, attributes: true, attributeFilter: ['class'] });
            });
          })();
        </script>
      </section>

      <!-- POST 2 -->
      <section class="asmr-post" id="post_RJ272127">
        <h2>Otro post con player</h2>
        <p>2 tracks</p>
        <div id="player_RJ272127"></div>
        <div class="controls">
          <button id="subtitle-toggle-btn-RJ272127" class="toggle-subtitle-btn">Mostrar Subtítulos</button>
        </div>
        <script>
          (function(){
            const ID = 'RJ272127';
            const container = document.getElementById('player_' + ID);
            if (!container || container.classList.contains('aplayer-initialized')) return;
            container.classList.add('aplayer-initialized');

            const ap = new APlayer({
              container: container,
              theme: '#7e57c2',
              lrcType: 3,
              <!-- AUDIO_LIST_START:RJ272127 -->
              audio: [
                /* Este bloque será reemplazado automáticamente */
              ]
              <!-- AUDIO_LIST_END:RJ272127 -->
            });

            const lyricsBar = document.getElementById('lyricsBar');
            const lyricSpan = document.getElementById('lyric');
            const toggleBtn = document.getElementById('subtitle-toggle-btn-RJ01200000');
            let subtitlesEnabled = false;

            toggleBtn.addEventListener('click', function() {
              subtitlesEnabled = !subtitlesEnabled;
              this.classList.toggle('active', subtitlesEnabled);
              lyricsBar.classList.toggle('visible', subtitlesEnabled);
              this.textContent = subtitlesEnabled ? 'Ocultar Subtítulos' : 'Mostrar Subtítulos';
              if (!subtitlesEnabled) lyricSpan.textContent = '';
              else {
                const currentLine = container.querySelector('.aplayer-lrc-current');
                if (currentLine) lyricSpan.textContent = currentLine.textContent;
              }
            });

            ap.on('canplay', function () {
              const lrcContainer = container.querySelector('.aplayer-lrc');
              if (!lrcContainer) return;
              const observer = new MutationObserver(() => {
                const current = lrcContainer.querySelector('.aplayer-lrc-current');
                const text = current ? current.textContent : '';
                if (subtitlesEnabled && lyricSpan.textContent !== text) {
                  lyricSpan.textContent = text;
                }
              });
              observer.observe(lrcContainer, { childList: true, subtree: true, attributes: true, attributeFilter: ['class'] });
            });
          })();
        </script>
      </section>

    </main>
  </div>

  <div id="lyricsBar" aria-hidden="true"><span id="lyric"></span></div>
</body>
</html>
